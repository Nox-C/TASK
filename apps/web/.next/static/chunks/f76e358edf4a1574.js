(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,36571,(t,e,a)=>{e.exports=t.r(28041)},89368,t=>{"use strict";var e=t.i(81271),a=t.i(36571),i=t.i(21521);let o=(0,i.createContext)(null);function r({children:t}){let[r,s]=(0,i.useState)(null),[n,u]=(0,i.useState)(!0),h=(0,a.useRouter)();(0,i.useEffect)(()=>{(async()=>{try{let t=await fetch("/api/auth/me");if(t.ok){let e=await t.json();s(e)}}catch(t){console.error("Auth check failed:",t)}finally{u(!1)}})()},[]);let l=async(t,e)=>{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})});if(!a.ok)throw Error((await a.json()).message||"Login failed");s(await a.json()),h.push("/dashboard")},c=async(t,e,a)=>{let i=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e,name:a})});if(!i.ok)throw Error((await i.json()).message||"Registration failed");s(await i.json()),h.push("/dashboard")},d=async()=>{await fetch("/api/auth/logout",{method:"POST"}),s(null),h.push("/login")};return(0,e.jsx)(o.Provider,{value:{user:r,isAuthenticated:!!r,isLoading:n,login:l,register:c,logout:d},children:t})}function s(){let t=(0,i.useContext)(o);if(!t)throw Error("useAuth must be used within an AuthProvider");return t}t.s(["AuthProvider",()=>r,"useAuth",()=>s])}]);