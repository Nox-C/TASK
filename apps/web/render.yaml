services:
  - type: web
    name: eve-trading-system
    plan: free # Use the free tier
    region: oregon # Choose closest to your target users
    runtime: node
    
    # PNPM Setup Logic
    buildCommand: corepack enable && pnpm install && pnpm run build
    startCommand: pnpm run start
    
    envVars:
      - key: NODE_VERSION
        value: "20.x" # Ensure modern Node for WebSockets
      - key: NPM_CONFIG_PRODUCTION
        value: "false"
      - key: NEXT_PUBLIC_ENVIRONMENT
        value: production
        
      # These will be prompted in the Render Dashboard during first deploy
      - key: NEXT_PUBLIC_API_URL
        sync: false
      - key: NEXT_PUBLIC_WS_URL
        sync: false
      - key: NEXT_PUBLIC_WS_ENDPOINT
        sync: false
        value: "wss://stream.binance.com:9443/ws"

    # Standard WebSocket timeout for Render Free Tier is 5 mins
    # Our usePriceFeed auto-reboot handles this.
